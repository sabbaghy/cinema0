"use strict";var currentYear=(new Date).getFullYear(),lastFind={title:"",year:"",page:"1"},arrayErrors=[];document.addEventListener("DOMContentLoaded",(function(){showInitialMovies()}));var showInitialMovies=function(){var e=["superman","batman","star","harry","speed","hard","avengers","rocky","lego"],n=Math.floor(Math.random()*e.length);lastFind.title=e[n],findMovies(lastFind.title,lastFind.year,lastFind.page)},findMovies=function(e,n,t){var s="?s=".concat(e,"&type=movie&y=").concat(n,"&page=").concat(t),i="http://www.omdbapi.com/".concat(s,"&apikey=c52b4a65");fetch(i).then((function(e){return e.json()})).then((function(e){"True"===e.Response&&e.totalResults>0&&showMovies(e.Search)})).catch((function(e){return console.log("se produjo un error ",e)}))},showMovies=function(e){var n=document.getElementById("movies"),t="/assets/img/no-image-available.png";n.innerHTML="",e.forEach((function(e){t="N/A"!==e.Poster?e.Poster:"/assets/img/no-image-available.png",n.innerHTML+='\n         <div class="movies-card">\n            <img src="'.concat(t,'" alt="" class="movie-img">\n         </div>')}))},validateEmail=function(e){return!!/^(([^<>()\[\]\\.,:\s@"]+(\.[^<>()\[\]\\.,:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},users=document.getElementById("users"),linkLogin=document.getElementById("link-login"),main=document.getElementById("main");users.addEventListener("click",(function(){main.classList.add("main--show")})),linkLogin.addEventListener("click",(function(e){e.preventDefault(),main.classList.add("main--show")})),main.addEventListener("click",(function(e){e.target.classList.contains("main")&&main.classList.remove("main--show")}));var signUpBtn=document.getElementById("sign-up"),signInBtn=document.getElementById("sign-in"),signUpContainer=document.getElementById("sign-up-container"),signInContainer=document.getElementById("sign-in-container"),overlayLeft=document.getElementById("overlay-left"),overlayRight=document.getElementById("overlay-right");signUpBtn.addEventListener("click",(function(){signInContainer.classList.remove("active"),signUpContainer.classList.add("active"),overlayLeft.classList.add("active"),overlayRight.classList.remove("active")})),signInBtn.addEventListener("click",(function(){signInContainer.classList.add("active"),signUpContainer.classList.remove("active"),overlayLeft.classList.remove("active"),overlayRight.classList.add("active")}));var signLogin=document.getElementById("signin-form"),nameLogin=document.getElementById("name-signin"),passLogin=document.getElementById("password-signin");signLogin.addEventListener("submit",(function(e){e.preventDefault(),noErrors=!0,checkInputsLogin(),noErrors&&(sessionStorage.setItem("sessionActive",nameLogin.value.trim()),signLogin.reset(),location.href="index.html")}));var noErrors,signUp=document.getElementById("signup-form"),nameSignUp=document.getElementById("name-signup"),emailSignUp=document.getElementById("email-signup"),passSignUp=document.getElementById("password-signup"),passConf=document.getElementById("passconf-signup");signUp.addEventListener("submit",(function(e){if(e.preventDefault(),noErrors=!0,checkInputs(),noErrors){var n={userID:0,username:nameSignUp.value,userEmail:emailSignUp.value,userPass:passSignUp.value,userFav:[]};addUser(n),sessionStorage.setItem("sessionActive",nameSignUp.value),signUp.reset(),location.href="index.html"}}));var checkInputs=function(){var e=nameSignUp.value.trim(),n=emailSignUp.value.trim(),t=passSignUp.value.trim(),s=passConf.value.trim();null===e||0===e.length||/^\s+$/.test(e)?(noErrors=!1,setErrorFor(nameSignUp,"Debe de indicar el nombre")):setSuccessFor(nameSignUp),validateEmail(n)?setSuccessFor(emailSignUp):(noErrors=!1,setErrorFor(emailSignUp,"Debe de indicar un correo valido")),null===t||0===t.length||/^\s+$/.test(t)?(noErrors=!1,setErrorFor(passSignUp,"La clave no es valida")):setSuccessFor(passSignUp),t!==s?(noErrors=!1,setErrorFor(passConf,"Las claves no coinciden")):setSuccessFor(passConf)},checkInputsLogin=function(){var e=nameLogin.value.trim(),n=passLogin.value.trim();if(null===e||0===e.length||/^\s+$/.test(e))noErrors=!1,setErrorFor(nameLogin,"Debe de indicar el nombre");else{var t=findUserId(e);t?(setSuccessFor(nameLogin),t.userPass!==n?(noErrors=!1,setErrorFor(passLogin,"Credenciales no invalidas")):setSuccessFor(passLogin)):(noErrors=!1,setErrorFor(nameLogin,"Usuario No esta registrado"))}},setErrorFor=function(e,n){var t=e.parentElement,s=t.querySelector("span");t.className="form-control warning",s.innerText=n},setSuccessFor=function(e){var n=e.parentElement;n.querySelector("span");n.className="form-control success"},addUser=function(e){var n=localStorage.getItem("nextUserId")||0;n++,e.userID=n,localStorage.setItem("user-".concat(e.username),JSON.stringify(e)),localStorage.setItem("nextUserId",n)},findUserId=function(e){return JSON.parse(localStorage.getItem("user-".concat(e)))};